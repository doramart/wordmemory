import{A as e,F as t,I as n,J as r,U as i,W as a,Y as o,at as s,b as c,ct as l,et as u,h as d,it as f,q as p,x as m,y as h}from"./vue-qqQgwo1J.js";import"./vendor-BZARPbSw.js";import{n as g,t as _}from"./index-DngR5WJL.js";var v={class:`login-page`},y={class:`login-form`},b={class:`login-button`},x=_({__name:`Login`,setup(_){let x=n(),S=t(),C=g(),w=s({email:``,code:``}),T=s(!1),E=s(!1),D=s(0),O=null,k=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,A=i(()=>k.test(w.value.email)&&D.value===0&&!T.value),j=i(()=>k.test(w.value.email)&&/^\d{6}$/.test(w.value.code)),M=i(()=>T.value?`å‘é€ä¸­`:D.value>0?`${D.value}s`:`å‘é€éªŒè¯ç `);async function N(){if(A.value)try{T.value=!0,await C.sendCode(w.value.email),h(`éªŒè¯ç å·²å‘é€`),P()}catch(e){c(e.message||`å‘é€å¤±è´¥`)}finally{T.value=!1}}function P(){D.value=60,O=setInterval(()=>{D.value--,D.value<=0&&clearInterval(O)},1e3)}async function F(){if(j.value)try{E.value=!0,await C.login(w.value.email,w.value.code),h(`ç™»å½•æˆåŠŸ`);let e=S.query.redirect||`/`;x.replace(e)}catch(e){c(e.message||`ç™»å½•å¤±è´¥`)}finally{E.value=!1}}return(t,n)=>{let i=m,s=e,c=d;return u(),p(`div`,v,[n[3]||=a(`div`,{class:`login-header`},[a(`h1`,{class:`title`},`å•è¯é€Ÿè®°`),a(`p`,{class:`subtitle`},`é‚®ç®±éªŒè¯ç ç™»å½•`)],-1),a(`div`,y,[o(c,{inset:``},{default:f(()=>[o(i,{modelValue:w.value.email,"onUpdate:modelValue":n[0]||=e=>w.value.email=e,label:`é‚®ç®±`,placeholder:`è¯·è¾“å…¥é‚®ç®±åœ°å€`,"left-icon":`envelop-o`,clearable:``,rules:[{required:!0,message:`è¯·è¾“å…¥é‚®ç®±`}]},null,8,[`modelValue`]),o(i,{modelValue:w.value.code,"onUpdate:modelValue":n[1]||=e=>w.value.code=e,label:`éªŒè¯ç `,placeholder:`è¯·è¾“å…¥6ä½éªŒè¯ç `,"left-icon":`shield-o`,maxlength:`6`,clearable:``},{button:f(()=>[o(s,{size:`small`,type:`primary`,disabled:!A.value,loading:T.value,onClick:N},{default:f(()=>[r(l(M.value),1)]),_:1},8,[`disabled`,`loading`])]),_:1},8,[`modelValue`])]),_:1}),a(`div`,b,[o(s,{type:`primary`,block:``,round:``,size:`large`,loading:E.value,disabled:!j.value,onClick:F},{default:f(()=>[...n[2]||=[r(` ç™»å½• `,-1)]]),_:1},8,[`loading`,`disabled`])])]),n[4]||=a(`div`,{class:`login-tips`},[a(`p`,null,`ğŸ“§ é¦–æ¬¡ç™»å½•å°†è‡ªåŠ¨åˆ›å»ºè´¦å·`),a(`p`,null,`ğŸ”’ éªŒè¯ç æœ‰æ•ˆæœŸä¸º5åˆ†é’Ÿ`),a(`p`,null,`â° åŒä¸€é‚®ç®±1åˆ†é’Ÿå†…åªèƒ½å‘é€ä¸€æ¬¡`)],-1)])}}},[[`__scopeId`,`data-v-fdfe59ca`]]);export{x as default};